{% load static %}

<meta charset="utf-8">
<title>Trojsten Graph</title>

<link rel="stylesheet" href="{% static 'people/css/bootstrap.min.css' %}" type="text/css"/>
<link rel="stylesheet" href="{% static 'people/css/graph.css' %}" type="text/css"/>

{% if debug %}
    <link rel="stylesheet" href="{% static 'people/css/nouislider.css' %}" type="text/css"/>

    <script src="{% static 'people/js/react.development.js' %}"></script>
    <script src="{% static 'people/js/react-dom.development.js' %}"></script>
    <script src="{% static 'people/js/d3.js' %}"></script>
    <script src="{% static 'people/js/nouislider.js' %}"></script>
    <script src="{% static 'people/js/fuse.min.js' %}"></script>
{% else %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.0.2/nouislider.css" type="text/css"/>

    <script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.12.0/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.0.2/nouislider.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.6/fuse.min.js"></script>
{% endif %}

<script src="{% static 'people/js/graph_enums.js' %}"></script>
<script src="{% static 'people/js/graph_utils.js' %}"></script>
<script src="{% static 'people/js/graph.js' %}"></script>

<body>
<div id="container"></div>
<a href="{% url 'logout' %}" class="logout-btn btn btn-info">Logout</a>
<script>
    const params = new URLSearchParams(window.location.search);
    const request = new XMLHttpRequest();
    request.overrideMimeType("application/json");
    request.open('GET', "{% url 'graph_data' %}" + "?" + params.toString(), true);
    request.onreadystatechange = function () {
        if (request.readyState === 4 && request.status === 200) {
            initializeGraph(JSON.parse(request.responseText));
        }
    };
    request.send(null);
</script>
</body>
